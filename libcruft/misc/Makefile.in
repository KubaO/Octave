#
# Makefile for octave's libcruft/misc directory
#
# John W. Eaton
# jwe@bevo.che.wisc.edu
# University of Wisconsin-Madison
# Department of Chemical Engineering

TOPDIR = ../..

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = @srcdir@

SPECIAL = gen-d1mach.c d1mach-tst.for dostop.c f77-extern.cc lo-error.cc

SPECIAL_DEPEND = d1mach.o dostop.o f77-extern.o lo-error.o

DISTFILES = $(subst d1mach.f, , $(DISTFILES))

EXTERNAL_DISTFILES = $(DISTFILES)

include $(TOPDIR)/Makeconf

include ../Makerules

d1mach.f: gen-d1mach
	./gen-d1mach > d1mach.f

# Don't optimize.

XCC = $(patsubst -O%, , $(CC))

gen-d1mach: $(srcdir)/gen-d1mach.c
	$(XCC) -DDP -o gen-d1mach $(srcdir)/gen-d1mach.c -lm

distclean::
	rm -f d1mach.f gen-d1mach
